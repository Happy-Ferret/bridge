<script src="/base/threads.js"></script>
<script>

var sharedWorker = new SharedWorker('/base/test/lib/service-test-1-worker.js');
sharedWorker.port.start();

threads.service('*')
  .on('message', message => {
    message.preventDefault();
    message.forward(sharedWorker.port);
  })

  // .on('broadcast', message => {
  //   message.preventDefault();
  //   message.forward(self);
  // })

  // .listen(sharedWorker.port)
  .listen();

</script>